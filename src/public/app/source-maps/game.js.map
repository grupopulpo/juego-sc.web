{"version":3,"sources":["module.ts","index-controller.ts","models/chain.ts","models/tile.ts","models/cookie.ts","models/level.ts","models/swap.ts","models/config.ts","states/boot.ts","states/preloader.ts","states/game-scene.ts","states/game-scene.timer.ts","states/game-end.ts","states/menu.ts","game-helpers.ts","_references.ts","candy-game.ts","game-directive.ts"],"names":[],"mappings":"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","file":"../game/game.js","sourcesContent":["/// <reference path='../../../../typings/angularjs/angular.d.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\t\r\n\tangular.module('GameApp',[]);\r\n}","/// <reference path='_references.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\t\r\n   export class IndexController{\r\n\t\tconstructor()\r\n\t\t{\r\n\t\t\tconsole.log('Game started')\r\n\t\t}\r\n\t}\r\n\t\r\n\tangular.module('GameApp').controller('IndexController', IndexController)\r\n\t\r\n\t\r\n}\r\n\r\n","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n\r\n\texport enum ChainType {\r\n\t\tchainTypeHorizontal,\r\n\t\tchainTypeVertical\r\n\t}\r\n\r\n   export class Chain {\r\n\t\tcookies: Cookie[];\r\n\t\tchainType: ChainType;\r\n\t\tscore: number;\r\n\r\n\t\taddCookie(cookie: Cookie) {\r\n\t\t\tif (this.cookies == null) {\r\n\t\t\t\tthis.cookies = [];\r\n\t\t\t}\r\n\t\t\tthis.cookies.push(cookie);\r\n\t\t}\r\n\r\n\t\tgetCookies(): Cookie[] {\r\n\t\t\treturn this.cookies;\r\n\t\t}\r\n\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n    \r\n\t export interface ITile{\r\n\t\t tileAtColumn (column: number, row: number): Tile;\r\n\t }\r\n\t \r\n\t export class Tile implements ITile{\r\n\t\t \r\n\t\t tileAtColumn(column: number, row: number): Tile{\r\n\t\t\t return null;\r\n\t\t }\r\n\t }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n\r\n\t\r\n\t\r\n\texport interface ICookie{\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t\tcookieType: CookieType;\r\n\t\tsprite: Phaser.Sprite;\r\n\t\t\r\n\t\tspriteName?: () => string;\r\n\t\thighlightedSpriteName?: () => string;\r\n\t}\r\n\t\r\n\texport interface ICookiePosition{\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t}\r\n\t\r\n\t\r\n\texport enum CookieType{\r\n\t\tcroissant = 1,\r\n\t\t\tcupcake = 2,\r\n\t\t\tdanish = 3,\r\n\t\t\tdonut = 4,\r\n\t\t\tmacaroon = 5,\r\n\t\t\tsugarCookie = 6\r\n\t}\r\n\r\n\texport class Cookie {\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t\tcookieType: number;\r\n\t\tsprite: any;\r\n\t\t\r\n\t\tconstructor(column: number,row: number,cookieType: number){\r\n\t\t\tthis.column = column;\r\n\t\t\tthis.row = row;\r\n\t\t\tthis.cookieType = cookieType;\r\n\t\t}\r\n\r\n\t   spriteNames: Array<string> = [\r\n\t\t\t\"Croissant\",\r\n\t\t\t\"Cupcake\",\r\n\t\t\t\"Danish\",\r\n\t\t\t\"Donut\",\r\n\t\t\t\"Macaroon\",\r\n\t\t\t\"SugarCookie\"\r\n\t\t]\r\n\r\n\t\t//sterben\r\n\t\tspriteNames2: Array<string> = [\r\n\t\t\t\"Pan\",\r\n\t\t\t\"Cupcake\",\r\n\t\t\t\"Caramelo azul\",\r\n\t\t\t\"Donut\",\r\n\t\t\t\"Dulce verde\",\r\n\t\t\t\"Estrella\"\r\n\t\t]\r\n\r\n\t    highlightedSpriteNames: Array<string> = [\r\n\t\t\t\"Croissant-Highlighted\",\r\n\t\t\t\"Cupcake-Highlighted\",\r\n\t\t\t\"Danish-Highlighted\",\r\n\t\t\t\"Donut-Highlighted\",\r\n\t\t\t\"Macaroon-Highlighted\",\r\n\t\t\t\"SugarCookie-Highlighted\",\r\n\t\t]\r\n\r\n\r\n\t\tspriteName(): string {\r\n\t\t\treturn this.spriteNames[this.cookieType - 1];\r\n\t\t}\r\n\r\n\t\t//sterben\r\n\t\tspriteName2(): string {\r\n\t\t\treturn this.spriteNames2[this.cookieType - 1];\r\n\t\t}\r\n\r\n\t\thighlightedSpriteName() {\r\n         return this.highlightedSpriteNames[this.cookieType - 1];\r\n\t\t}\r\n\t\t\r\n\t\t//TODO: loging ?\r\n\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n\r\n   export interface IJsonLevel {\r\n\t\ttiles: number[][];\r\n\t\ttargetScore: number;\r\n\t\tmoves: number\r\n\t}\r\n\r\n\texport class Level {\r\n\t\t\r\n\t\tcookies: Cookie[][];\r\n\t\ttiles: Tile[][];\r\n\t\tpossibleSwaps: Swap[];\r\n\t\t\r\n\t\tconfig: Config;\r\n\r\n\t\tconstructor(gameConfig: Config) {\r\n\t\t\tthis.config = gameConfig;\r\n\t\t\tthis.createCookiesArray();\r\n\t\t}\r\n\r\n\t\tshuffle(): Array<Cookie> {\r\n\t\t\tvar set: Cookie[];\r\n\r\n\t\t\tdo {\r\n\t\t\t\tset = this.createInitialCookies();\r\n\t\t\t\tthis.detectPossibleSwaps();\r\n\t\t\t}\r\n\t\t\twhile (this.possibleSwaps.length == 0)\r\n\r\n         console.log(this.possibleSwaps);\r\n\r\n\t\t\treturn set;\r\n\t\t}\r\n\r\n\t\tisPossibleSwap(other: Swap): boolean {\r\n\r\n\t\t\tfor (var i = 0; i < this.possibleSwaps.length; i++) {\r\n\t\t\t\tvar possibleSwap = this.possibleSwaps[i];\r\n\r\n\t\t\t\tvar isPossible = (this.isTwoCookiesEquals(other.cookieA, possibleSwap.cookieA) && this.isTwoCookiesEquals(other.cookieB, possibleSwap.cookieB)) ||\r\n\t\t\t\t\t(this.isTwoCookiesEquals(other.cookieB, possibleSwap.cookieA) && this.isTwoCookiesEquals(other.cookieA, possibleSwap.cookieB));\r\n\r\n\t\t\t\tif (isPossible) return true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tgetPossibleSwaps(): Swap[] {\r\n\t\t\treturn this.possibleSwaps;\r\n\t\t}\r\n\r\n\r\n\t\tcreateInitialCookies(): Array<Cookie> {\r\n\t\t\tvar array: Cookie[] = [];\r\n\t\t\tfor (var row: number = 0; row < this.config.numRows; row++) {\r\n\t\t\t\tfor (var column: number = 0; column < this.config.numColumns; column++) {\r\n\r\n\t\t\t\t\tif (this.tiles[column][row] != null) {\r\n\t\t\t\t\t\tvar cookieType: CookieType = this.calculateCookieType(column, row);\r\n\t\t\t\t\t\tvar cookie: Cookie = this.createCookieAtColumn(column, row, cookieType);\r\n\t\t\t\t\t\tarray.push(cookie);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.cookies[column][row] = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\t\t}\r\n\r\n\r\n\t\tcookieAtPosition(column: number, row: number) {\r\n\t\t\treturn this.cookies[column][row]\r\n\t\t}\r\n\r\n\r\n\t\ttileAtColumn(column: number, row: number): Tile {\r\n\t\t\treturn this.tiles[column][row]\r\n\t\t}\r\n\r\n\t\tinitWithData(level: IJsonLevel) {\r\n\t\t\tthis.createTilesArray();\r\n\r\n\t\t\tfor (var row: number = 0; row < this.config.numRows; row++) {\r\n\t\t\t\tfor (var column: number = 0; column < this.config.numColumns; column++) {\r\n\t\t\t\t\tvar tile = level.tiles[column][row];\r\n\r\n\t\t\t\t\tif (tile == 1) {\r\n\t\t\t\t\t\tthis.tiles[column][row] = new Tile();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.tiles[column][row] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tperformSwap(swap: Swap) {\r\n\t\t\tvar columnA: number = swap.cookieA.column,\r\n\t\t\t\trowA: number = swap.cookieA.row,\r\n\t\t\t\tcolumnB: number = swap.cookieB.column,\r\n\t\t\t\trowB: number = swap.cookieB.row;\r\n\r\n\t\t\tthis.cookies[columnA][rowA] = swap.cookieB;\r\n\t\t\tswap.cookieB.column = columnA;\r\n\t\t\tswap.cookieB.row = rowA;\r\n\r\n\t\t\tthis.cookies[columnB][rowB] = swap.cookieA;\r\n\t\t\tswap.cookieA.column = columnB;\r\n\t\t\tswap.cookieA.row = rowB;\r\n\r\n\t\t}\r\n\r\n\t\tremoveMatches(): Chain[] {\r\n\t\t\tvar horizontalChains = this.detectHorizontalMatches();\r\n\t\t\tvar verticalChains = this.detectVerticalMatches();\r\n\r\n\t\t\tthis.removeCookies(horizontalChains);\r\n\t\t\tthis.removeCookies(verticalChains);\r\n\t\t\t\r\n\t\t\tthis.calculateScores(horizontalChains);\r\n\t\t\tthis.calculateScores(verticalChains);\r\n\r\n\t\t\treturn horizontalChains.concat(verticalChains);\r\n\t\t}\r\n\r\n\r\n\t\tcalculateScores(chains: Chain[]) {\r\n\t\t\tchains.forEach((chain) => {\r\n\t\t\t\tchain.score = 60 * (chain.cookies.length - 2);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfillHoles(): any[] {\r\n\t\t\tvar columns = [];\r\n \r\n\t\t\t// 1\r\n\t\t\tfor (var column = 0; column < this.config.numColumns; column++) {\r\n\r\n\t\t\t\tvar array: Cookie[];\r\n\t\t\t\tfor (var row = 0; row < this.config.numRows; row++) {\r\n \r\n\t\t\t\t\t// 2\r\n\t\t\t\t\tif (this.tiles[column][row] != null && this.cookies[column][row] == null) {\r\n \r\n\t\t\t\t\t\t// 3\r\n\t\t\t\t\t\tfor (var lookup = row + 1; lookup < this.config.numRows; lookup++) {\r\n\t\t\t\t\t\t\tvar cookie = this.cookies[column][lookup];\r\n\t\t\t\t\t\t\tif (cookie != null) {\r\n\t\t\t\t\t\t\t\t// 4\r\n\t\t\t\t\t\t\t\tthis.cookies[column][lookup] = null;\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\t\t\t\t\t\tcookie.row = row;\r\n \r\n\t\t\t\t\t\t\t\t// 5\r\n\t\t\t\t\t\t\t\tif (array == null) {\r\n\t\t\t\t\t\t\t\t\tarray = [];\r\n\t\t\t\t\t\t\t\t\tcolumns.push(array);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tarray.push(cookie);\r\n \r\n\t\t\t\t\t\t\t\t// 6\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn columns;\r\n\t\t}\r\n\r\n\t\ttopUpCookies() {\r\n\t\t\tvar columns = [];\r\n\r\n\t\t\tvar cookieType = 0;\r\n\r\n\t\t\tfor (var column = 0; column < this.config.numColumns; column++) {\r\n\r\n\t\t\t\tvar array: Cookie[];\r\n \r\n\t\t\t\t// 1\r\n\t\t\t\tfor (var row = this.config.numRows - 1; row >= 0 && this.cookies[column][row] == null; row--) {\r\n \r\n\t\t\t\t\t// 2\r\n\t\t\t\t\tif (this.tiles[column][row] != null) {\r\n \r\n\t\t\t\t\t\t// 3\r\n\t\t\t\t\t\tvar newCookieType: CookieType;\r\n\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\tnewCookieType = GameHelpers.getRandomNumber(6);\r\n\t\t\t\t\t\t} while (newCookieType == cookieType);\r\n\t\t\t\t\t\tcookieType = newCookieType;\r\n \r\n\t\t\t\t\t\t// 4\r\n\t\t\t\t\t\tvar cookie = this.createCookieAtColumn(column, row, newCookieType);\r\n \r\n\t\t\t\t\t\t// 5\r\n\t\t\t\t\t\tif (array == null) {\r\n\t\t\t\t\t\t\tarray = [];\r\n\t\t\t\t\t\t\tcolumns.push(array);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tarray.push(cookie);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.detectPossibleSwaps();\r\n\t\t\t\r\n\t\t\treturn columns;\r\n\t\t}\r\n\r\n\t\tprivate createCookieAtColumn(column: number, row: number, cookieType: CookieType): Cookie {\r\n\t\t\tvar cookie = new Cookie(column, row, cookieType);\r\n\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\treturn cookie;\r\n\t\t}\r\n\r\n\t\tprivate createCookiesArray() {\r\n\t\t\tthis.cookies = new Array(this.config.numColumns - 1);\r\n\t\t\tfor (var i = 0; i < this.config.numColumns; i++) {\r\n\t\t\t\tthis.cookies[i] = new Array(this.config.numRows - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate createTilesArray() {\r\n\t\t\tthis.tiles = new Array(this.config.numColumns - 1);\r\n\t\t\tfor (var i = 0; i < this.config.numColumns; i++) {\r\n\t\t\t\tthis.tiles[i] = new Array(this.config.numRows - 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tprivate isTwoCookiesEquals(cookieA: Cookie, cookieB: Cookie) {\r\n\t\t\treturn cookieA.column == cookieB.column && cookieA.row == cookieB.row && cookieA.cookieType == cookieB.cookieType;\r\n\t\t}\r\n\r\n\t\tprivate hasChainAtColumn(column: number, row: number): boolean {\r\n\r\n\t\t\tvar cookie = this.cookies[column][row],\r\n\t\t\t\tcookieType: CookieType;\r\n\r\n\t\t\tif (cookie) {\r\n\t\t\t\tcookieType = cookie.cookieType;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcookieType = 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar horzLength = 1;\r\n\t\t\tfor (var i = column - 1; i >= 0 && this.cookies[i][row] && this.cookies[i][row].cookieType == cookieType; i-- , horzLength++);\r\n\t\t\tfor (var i = column + 1; i < this.config.numColumns && this.cookies[i][row] && this.cookies[i][row].cookieType == cookieType; i++ , horzLength++);\r\n\t\t\tif (horzLength >= 3) return true;\r\n\r\n\t\t\tvar vertLength = 1;\r\n\t\t\tfor (var i = row - 1; i >= 0 && this.cookies[column][i] && this.cookies[column][i].cookieType == cookieType; i-- , vertLength++);\r\n\t\t\tfor (var i = row + 1; i < this.config.numRows && this.cookies[column][i] && this.cookies[column][i].cookieType == cookieType; i++ , vertLength++);\r\n\t\t\treturn (vertLength >= 3);\r\n\t\t}\r\n\r\n\t\tprivate detectPossibleSwaps() {\r\n\t\t\tvar possibleSwaps: Swap[] = [];\r\n\r\n\t\t\tfor (var row = 0; row < this.config.numRows; row++) {\r\n\t\t\t\tfor (var column = 0; column < this.config.numColumns; column++) {\r\n\r\n\t\t\t\t\tvar cookie = this.cookies[column][row];\r\n\t\t\t\t\tif (cookie) {\r\n \r\n\t\t\t\t\t\t// Is it possible to swap this cookie with the one on the right?\r\n\t\t\t\t\t\tif (column < this.config.numColumns - 1) {\r\n\t\t\t\t\t\t\t// Have a cookie in this spot? If there is no tile, there is no cookie.\r\n\t\t\t\t\t\t\tvar other = this.cookies[column + 1][row];\r\n\t\t\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\t\t\t// Swap them\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = other;\r\n\t\t\t\t\t\t\t\tthis.cookies[column + 1][row] = cookie;\r\n \r\n\t\t\t\t\t\t\t\t// Is either cookie now part of a chain?\r\n\t\t\t\t\t\t\t\tif (this.hasChainAtColumn(column + 1, row) ||\r\n\t\t\t\t\t\t\t\t\tthis.hasChainAtColumn(column, row)) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar swap = new Swap();\r\n\t\t\t\t\t\t\t\t\tswap.cookieA = cookie;\r\n\t\t\t\t\t\t\t\t\tswap.cookieB = other;\r\n\t\t\t\t\t\t\t\t\t//console.log('cookieA: '+ cookie.spriteName2()); //sterben\r\n\t\t\t\t\t\t\t\t\t//console.log('cookieB: '+ other); //sterben\r\n\t\t\t\t\t\t\t\t\tpossibleSwaps.push(swap);\r\n\t\t\t\t\t\t\t\t}\r\n \r\n\t\t\t\t\t\t\t\t// Swap them back\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\t\t\t\t\t\tthis.cookies[column + 1][row] = other;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (row < this.config.numRows - 1) {\r\n\r\n\t\t\t\t\t\t\tvar other = this.cookies[column][row + 1];\r\n\t\t\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\t\t\t// Swap them\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = other;\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row + 1] = cookie;\r\n\r\n\t\t\t\t\t\t\t\tif (this.hasChainAtColumn(column, row + 1) ||\r\n\t\t\t\t\t\t\t\t\tthis.hasChainAtColumn(column, row)) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar swap = new Swap();\r\n\t\t\t\t\t\t\t\t\tswap.cookieA = cookie;\r\n\t\t\t\t\t\t\t\t\tswap.cookieB = other;\r\n\t\t\t\t\t\t\t\t\tpossibleSwaps.push(swap);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row + 1] = other;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n         this.possibleSwaps = possibleSwaps;\r\n\t\t}\r\n\r\n\t\tprivate calculateCookieType(column: number, row: number): CookieType {\r\n\t\t\tvar cookieType: CookieType;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tcookieType = GameHelpers.getRandomNumber(this.config.numCookieTypes);\r\n\t\t\t}\r\n\t\t\twhile (this.whereIsAlreadyTwoCookies(column, row, cookieType))\r\n\r\n\t\t\treturn cookieType;\r\n\t\t}\r\n\r\n\t\tprivate whereIsAlreadyTwoCookies(column: number, row: number, cookieType: CookieType): boolean {\r\n\r\n\t\t\treturn (column >= 2 &&\r\n\t\t\t\tthis.cookies[column - 1][row] &&\r\n\t\t\t\tthis.cookies[column - 2][row] &&\r\n\t\t\t\tthis.cookies[column - 1][row].cookieType == cookieType &&\r\n\t\t\t\tthis.cookies[column - 2][row].cookieType == cookieType)\r\n\t\t\t\t||\r\n\t\t\t\t(row >= 2 &&\r\n\t\t\t\t\tthis.cookies[column][row - 1] &&\r\n\t\t\t\t\tthis.cookies[column][row - 2] &&\r\n\t\t\t\t\tthis.cookies[column][row - 1].cookieType == cookieType &&\r\n\t\t\t\t\tthis.cookies[column][row - 2].cookieType == cookieType)\r\n\t\t}\r\n\r\n\t\tprivate detectHorizontalMatches(): Chain[] {\r\n\r\n\t\t\tvar set: Chain[] = [];\r\n\r\n\t\t\tfor (var row = 0; row < this.config.numRows; row++) {\r\n\t\t\t\tfor (var column = 0; column < this.config.numColumns - 2;) {\r\n\t\t\t\t\tif (this.cookies[column][row] != null) {\r\n\t\t\t\t\t\tvar matchType = this.cookies[column][row].cookieType;\r\n\r\n\t\t\t\t\t\tif (this.cookies[column + 1][row] && this.cookies[column + 1][row].cookieType == matchType &&\r\n\t\t\t\t\t\t\tthis.cookies[column + 2][row] && this.cookies[column + 2][row].cookieType == matchType) {\r\n\r\n\t\t\t\t\t\t\tvar chain = new Chain();\r\n\t\t\t\t\t\t\tchain.chainType = ChainType.chainTypeHorizontal;\r\n\r\n\t\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\t\tchain.addCookie(this.cookies[column][row]);\r\n\t\t\t\t\t\t\t\tcolumn += 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twhile (column < this.config.numColumns && this.cookies[column][row] && this.cookies[column][row].cookieType == matchType);\r\n\t\t\t\t\t\t\tconsole.log('Type Cookie: ' + this.cookies[column][row].cookieType); //sterben\r\n\t\t\t\t\t\t\tconsole.log('Type Cookie: ' + this.cookies[column][row].spriteName2()); //sterben\r\n\t\t\t\t\t\t\tset.push(chain);\r\n\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumn += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn set;\r\n\t\t}\r\n\r\n\t\tprivate detectVerticalMatches(): Chain[] {\r\n\t\t\tvar set: Chain[] = [];\r\n\r\n\t\t\tfor (var column = 0; column < this.config.numColumns; column++) {\r\n\t\t\t\tfor (var row = 0; row < this.config.numRows - 2;) {\r\n\t\t\t\t\tif (this.cookies[column][row] != null) {\r\n\t\t\t\t\t\tvar matchType = this.cookies[column][row].cookieType;\r\n\r\n\t\t\t\t\t\tif (this.cookies[column][row + 1] && this.cookies[column][row + 1].cookieType == matchType &&\r\n\t\t\t\t\t\t\tthis.cookies[column][row + 2] && this.cookies[column][row + 2].cookieType == matchType) {\r\n\r\n\t\t\t\t\t\t\tvar chain = new Chain();\r\n\t\t\t\t\t\t\tchain.chainType = ChainType.chainTypeVertical;\r\n\r\n\t\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\t\tchain.addCookie(this.cookies[column][row]);\r\n\t\t\t\t\t\t\t\trow += 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twhile (row < this.config.numRows && this.cookies[column][row] && this.cookies[column][row].cookieType == matchType);\r\n\r\n\t\t\t\t\t\t\tset.push(chain);\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn set;\r\n\t\t}\r\n\r\n\t\tprivate removeCookies(chains: Chain[]) {\r\n\t\t\tchains.forEach((chain) => {\r\n\t\t\t\tchain.cookies.forEach((cookie) => {\r\n\t\t\t\t\tthis.cookies[cookie.column][cookie.row] = null;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n    \r\n\t \r\n\t export class Swap{\r\n\t\t \r\n\t\t cookieA: Cookie;\r\n\t\t cookieB: Cookie;\r\n\t\t \r\n\t }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict'; \r\n\t\r\n   export class Config{\r\n\t\tnumColumns: number;\r\n\t\tnumRows: number;\r\n\t\tnumCookieTypes;\r\n\t\t\r\n\t\tconstructor(numColumns: number, numRows: number, numCookieTypes: number){\r\n\t\t\tthis.numColumns = numColumns;\r\n\t\t\tthis.numRows = numRows;\r\n\t\t\tthis.numCookieTypes = numCookieTypes;\r\n\t\t}\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n\t'use strict'; \r\n\t\r\n   export class Boot extends Phaser.State {\r\n \r\n        preload() {\r\n \r\n        }\r\n \r\n        create() {\r\n \r\n            //  Unless you specifically need to support multitouch I would recommend setting this to 1\r\n            this.input.maxPointers = 1;\r\n \r\n            //  Phaser will automatically pause if the browser tab the game is in loses focus. You can disable that here:\r\n            this.stage.disableVisibilityChange = true;\r\n \r\n            if (this.game.device.desktop) {\r\n                //  If you have any desktop specific settings, they can go in here\r\n                //this.stage.scale.pageAlignHorizontally = true;\r\n            }\r\n            else {\r\n                //  Same goes for mobile settings.\r\n            }\r\n \r\n            this.game.state.start('Preloader', true, false);\r\n \r\n        }\r\n \r\n    }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n   'use strict';\r\n\r\n   export class Preloader extends Phaser.State {\r\n\r\n      preload() {\r\n         \r\n         var assets = 'app/game/assets/';\r\n         \r\n         var text = this.game.add.text(this.game.world.centerX, this.game.world.centerY, \"Cargando...\", { //Sterben\r\n             font: \"75px Arial\",\r\n             //font: \"65px Arial\", //sterben\r\n             fill: \"#ff0044\",\r\n             align: \"center\"\r\n         });\r\n\r\n         text.anchor.set(0.5, 0.5);\r\n         \r\n         this.game.load.image('logo', assets+'logo.png');//TODO: remove not used assets\r\n         this.game.load.image('bg', assets+'Background@2x.png');\r\n         this.game.load.image('levelComplete', assets+'LevelComplete@2x.png');\r\n         \r\n         this.game.load.spritesheet(\"GEMS\", assets+'diamonds32x5.png', 32, 32);\r\n         \r\n         this.game.load.image('Croissant', assets+'Croissant@2x.png');\r\n         this.game.load.image('Cupcake', assets+'Cupcake@2x.png');\r\n         this.game.load.image('Danish', assets+'Danish@2x.png');\r\n         this.game.load.image('Donut', assets+'Donut@2x.png');\r\n         this.game.load.image('Macaroon', assets+'Macaroon@2x.png');\r\n         this.game.load.image('SugarCookie', assets+'SugarCookie@2x.png');\r\n         \r\n         \r\n         this.game.load.image('Tile', assets+'Tile@2x.png');\r\n         this.game.load.image('TileEmpty', assets+'TileEmpty.png')\r\n         \r\n         this.game.load.json('level0', assets+'levels/Level_0.json');\r\n         this.game.load.json('level1', assets+'levels/Level_1.json');\r\n         this.game.load.json('level2', assets+'levels/Level_2.json');\r\n         this.game.load.json('level3', assets+'levels/Level_3.json');\r\n         this.game.load.json('level4', assets+'levels/Level_4.json');\r\n         this.game.load.json('level5', assets+'levels/Level_5.json');\r\n         this.game.load.json('level6', assets+'levels/Level_6.json'); //sterben\r\n\r\n         \r\n         this.game.load.audio('swapSound', assets+'sounds/Chomp.wav');\r\n         this.game.load.audio('invalidSwapSound', assets+'sounds/Error.wav');\r\n         this.game.load.audio('matchSound', assets+'sounds/Ka-Ching.wav');\r\n         this.game.load.audio('fallingCookieSound', assets+'sounds/Scrape.wav');\r\n         this.game.load.audio('addCookieSound', assets+'sounds/Drip.wav');\r\n         this.game.load.audio('bgMusic', assets+'sounds/mining-by-moonlight.mp3');\r\n      }\r\n\r\n      create() {\r\n \r\n         this.game.state.states['GameScene'].levelNumber = 0;\r\n         this.game.state.start('GameScene', true, false);\r\n      }\r\n\r\n   }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nimport GameObjects = GameApp.Models;\r\n\r\nimport Level = GameObjects.Level;\r\nimport Swap = GameObjects.Swap;\r\nimport IJsonLevel = GameObjects.IJsonLevel;\r\nimport Cookie = GameObjects.Cookie;\r\nimport Chain = GameObjects.Chain;\r\nimport GameConfig = GameObjects.Config;\r\n\r\n/*croissant = 1,\r\ncupcake = 2,\r\ndanish = 3,\r\ndonut = 4,\r\nmacaroon = 5,\r\nsugarCookie = 6*/\r\n\r\nvar  countCroissant = 0;\r\nvar flagCroissant = 0;\r\n\r\nvar countCupcake = 0;\r\nvar flagCupcake = 0;\r\n\r\nvar countDanish = 0;\r\nvar flagDanish = 0;\r\n\r\nvar countDonut = 0;\r\nvar flagDonut = 0;\r\n\r\nvar countMacaroon = 0;\r\nvar flagMacaroon = 0;\r\n\r\nvar countSugarCookie = 0;\r\nvar flagSugarCookie = 0;\r\n\r\n\r\n\r\nmodule GameApp.States {\r\n   'use strict';\r\n\r\n   export class GameScene extends Phaser.State {\r\n\r\n      tileWidth: number = 64.0;\r\n      tileHeight: number = 72.0;\r\n      marginYDelta: number = 50;\r\n\r\n      level: GameObjects.Level;\r\n\r\n      cookieLayer: Phaser.Group;\r\n      tilesLayer: Phaser.Group;\r\n\r\n      swipeFromColumn: number;\r\n      swipeFromRow: number;\r\n      \r\n      isPossibleSwap:boolean = false;\r\n      userInteractionEnabled: boolean;\r\n\r\n      swapSound: Phaser.Sound;\r\n      invalidSwapSound: Phaser.Sound;\r\n      matchSound: Phaser.Sound;\r\n      fallingCookieSound: Phaser.Sound;\r\n      addCookieSound: Phaser.Sound;\r\n      \r\n      gameTimer: GameTimer;\r\n      \r\n      score: number;\r\n      scoreText: Phaser.Text;\r\n      scoreLabel: Phaser.Text;\r\n\r\n      create() {\r\n\r\n         var levelNumber: number = this.game.state.states['GameScene'].levelNumber;\r\n\r\n         var bg = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, 'bg');\r\n         bg.anchor.setTo(0.5, 0.5);\r\n\r\n         this.game.sound.stopAll(); //sterben\r\n         //this.game.sound.play('bgMusic');\r\n         \r\n         this.createLevelText(levelNumber + 1);\r\n         \r\n         this.initScore();\r\n         this.createScoreText();\r\n         \r\n         this.swapSound = this.game.add.audio('swapSound');\r\n         this.invalidSwapSound = this.game.add.audio('invalidSwapSound');\r\n         this.matchSound = this.game.add.audio('matchSound');\r\n         this.fallingCookieSound = this.game.add.audio('fallingCookieSound');\r\n         this.addCookieSound = this.game.add.audio('addCookieSound');\r\n         \r\n         this.gameTimer = new GameTimer(this.game);\r\n         this.gameTimer.createTimer();\r\n\r\n         this.game.input.addMoveCallback(this.touchesMoved, this);\r\n         \r\n         \r\n         this.initLevel('level'+levelNumber);\r\n         this.beginGame();\r\n\r\n      }\r\n      \r\n      private initScore() {\r\n         var scoreFromState = this.game.state.states['GameScene'].score;\r\n         if(scoreFromState != null){\r\n            this.score =  scoreFromState;\r\n         }\r\n         else{\r\n            this.score =  0;\r\n         }\r\n      }\r\n      \r\n      private createLevelText(levelNumber){\r\n         var levelLabel = this.game.add.text(550, 20, \"Level:\", {\r\n            font: \"Gill Sans Bold\",\r\n            fill: \"white\",\r\n            align: \"center\",\r\n            fontSize: 20\r\n         });\r\n         levelLabel.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n         \r\n         var levelText = this.game.add.text(550, 40, \"\"+levelNumber, {\r\n            font: \"Gill Sans Bold\",\r\n            fill: \"white\",\r\n            align: \"center\",\r\n            fontSize: 30\r\n         });\r\n         levelText.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n      }\r\n      \r\n      private createScoreText(){\r\n         this.scoreLabel = this.game.add.text(this.game.world.centerX, 20 , \"Score:\" , {\r\n            font: \"Gill Sans Bold\",\r\n            //fill: \"white\",  //sterben\r\n            fill: \"red\",\r\n            fontSize: 20\r\n         });\r\n         this.scoreLabel.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n         \r\n         \r\n         this.scoreText = this.game.add.text(this.game.world.centerX, 40 , \"\"+this.score , {\r\n            font: \"Gill Sans Bold\",\r\n            fill: \"white\",\r\n            fontSize: 30\r\n         });\r\n         this.scoreText.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n         \r\n      }\r\n      \r\n      private updateScoreText(){\r\n         this.scoreText.text = \"\"+this.score;\r\n      }\r\n\r\n      private initLevel(levelName: string) {\r\n         var levelData: IJsonLevel = this.game.cache.getJSON(levelName);\r\n         \r\n         if(levelData == null)\r\n         {\r\n            throw 'Cannot load level data';\r\n         }\r\n         \r\n         var gameConfig = new GameConfig(9, 9, 6);\r\n         this.level = new Level(gameConfig);\r\n         this.level.initWithData(levelData);\r\n         this.addTiles();\r\n      }\r\n      \r\n      render() {\r\n         this.gameTimer.renderTimer();\r\n      }\r\n\r\n\r\n      beginGame() {\r\n         this.userInteractionEnabled = true;\r\n         this.shuffle();\r\n      }\r\n\r\n      shuffle() {\r\n\r\n         var cookies: Cookie[] = this.level.shuffle();\r\n         this.addSpritesForCookies(cookies);\r\n      }\r\n\r\n      addSpritesForCookies(cookies: Cookie[]) {\r\n\r\n         this.cookieLayer = this.game.add.group();\r\n         this.cookieLayer.z = 2;\r\n         \r\n\r\n         cookies.forEach((cookie: Cookie) => {\r\n            var point = this.pointForCookie(cookie.column, cookie.row);\r\n            var createdCookie = this.cookieLayer.create(point.x, point.y, cookie.spriteName());\r\n            createdCookie.inputEnabled = true;\r\n            createdCookie.events.onInputDown.add(this.touchesBegan, this);\r\n            createdCookie.events.onInputUp.add(this.touchesEnd, this);\r\n            cookie.sprite = createdCookie;\r\n         })\r\n      }\r\n\r\n      pointForCookie(column: number, row: number): Phaser.Point {\r\n         var x = column * this.tileWidth + this.tileWidth / 2;\r\n         var y = (row * this.tileHeight + this.tileHeight / 2) + this.marginYDelta;\r\n         \r\n         return new Phaser.Point(x, y);\r\n      }\r\n\r\n      convertPoint(point: Phaser.Point, cookiePosition: GameObjects.ICookiePosition): boolean {\r\n\r\n         var x = point.x - 32;\r\n         var y = point.y - 32 - this.marginYDelta;\r\n         \r\n         if (x >= 0 && x < this.level.config.numColumns * this.tileWidth &&\r\n            y >= 0 && y < this.level.config.numRows * this.tileHeight) {\r\n\r\n            cookiePosition.column = Phaser.Math.floor(x / this.tileWidth);\r\n            cookiePosition.row = Phaser.Math.floor((y) / this.tileHeight);\r\n\r\n            return true;\r\n         }\r\n         else {\r\n            return false;\r\n         }\r\n\r\n      }\r\n\r\n      addTiles() {\r\n         this.tilesLayer = this.game.add.group();\r\n         this.tilesLayer.z = 1;\r\n\r\n         for (var row: number = 0; row < this.level.config.numColumns; row++) {\r\n            for (var column: number = 0; column < this.level.config.numColumns; column++) {\r\n               if (this.level.tileAtColumn(column, row) != null) {\r\n                  var point = this.pointForCookie(column, row);\r\n                  this.tilesLayer.create(point.x, point.y, 'Tile');\r\n               }\r\n            }\r\n         }\r\n      }\r\n      \r\n      debugMove(x, y){\r\n         var cookiePosition: GameObjects.ICookiePosition = {\r\n               column: null,\r\n               row: null\r\n         }\r\n         var convert = this.convertPoint(new Phaser.Point(x, y), cookiePosition);\r\n         \r\n         if(convert){\r\n            var cookie = this.level.cookieAtPosition(cookiePosition.column, cookiePosition.row);\r\n            /*if(cookie){\r\n               console.log('actual cookie', {\r\n               column: cookie.column,\r\n               row: cookie.row\r\n            })\r\n            }*/\r\n            \r\n         }\r\n        //console.log('movimientox2');\r\n        //console.log('x-'+x+' y-'+y);\r\n         //console.log('cookie point', cookiePosition);\r\n      }\r\n      touchesMoved(pointer: Phaser.Pointer, x, y, fromClick) {\r\n         \r\n         this.debugMove(x, y);\r\n         \r\n         if (this.swipeFromColumn == null) return;\r\n\r\n         if (pointer.isDown) {\r\n\r\n            var cookiePosition: GameObjects.ICookiePosition = {\r\n               column: null,\r\n               row: null\r\n            }\r\n            //TODO: need to configure this sizes\r\n            \r\n            if (this.convertPoint(new Phaser.Point(x, y), cookiePosition)) {\r\n\r\n               var horzDelta: number = 0,\r\n                  vertDelta: number = 0;\r\n\r\n               if (cookiePosition.column < this.swipeFromColumn) { // swipe left\r\n                  horzDelta = -1;\r\n               } else if (cookiePosition.column > this.swipeFromColumn) { // swipe right\r\n                  horzDelta = 1;\r\n               } else if (cookiePosition.row < this.swipeFromRow) { // swipe down\r\n                  vertDelta = -1;\r\n               } else if (cookiePosition.row > this.swipeFromRow) { // swipe up\r\n                  vertDelta = 1;\r\n               }\r\n\r\n               if (horzDelta != 0 || vertDelta != 0) {\r\n                  this.trySwapHorizontal(horzDelta, vertDelta);\r\n\r\n                  this.swipeFromColumn = null;\r\n               }\r\n            }\r\n         }\r\n\r\n      }\r\n\r\n      touchesBegan(selectedCookie: Phaser.Sprite, pointer: Phaser.Pointer) {\r\n         var cookiePosition: GameObjects.ICookiePosition = {\r\n            column: null,\r\n            row: null\r\n         }\r\n         \r\n         if (this.convertPoint(selectedCookie.position, cookiePosition)) {\r\n            if (this.level.cookieAtPosition(cookiePosition.column, cookiePosition.row)) {\r\n               this.swipeFromColumn = cookiePosition.column;\r\n               this.swipeFromRow = cookiePosition.row;\r\n            }\r\n\r\n            console.log('selectedCookie', 'column: ' + cookiePosition.column + ' row: ' + cookiePosition.row);\r\n         }\r\n\r\n         else {\r\n            this.swipeFromColumn = null;\r\n            this.swipeFromRow = null;\r\n         }\r\n      }\r\n\r\n      touchesEnd(selectedCookie: Phaser.Sprite, pointer: Phaser.Pointer) {\r\n         this.swipeFromColumn = this.swipeFromRow = null;\r\n         //console.log('releaseCookie', selectedCookie);\r\n         //console.log('up from', selectedGem);\r\n         //console.log('touchesEnd pointer', pointer.position);\r\n         \r\n         if(this.isPossibleSwap){ \r\n            this.handleMatches();\r\n         }\r\n         \r\n         \r\n         this.userInteractionEnabled = true;\r\n      }\r\n      \r\n      trySwapHorizontal(horzDelta: number, vertDelta: number) {\r\n            console.log('trySwapHorizontal'); //sterben\r\n\r\n         this.userInteractionEnabled = false;\r\n\r\n         var toColumn = this.swipeFromColumn + horzDelta;\r\n         var toRow = this.swipeFromRow + vertDelta;\r\n\r\n         if (toColumn < 0 || toColumn >= this.level.config.numColumns) return;\r\n         if (toRow < 0 || toRow >= this.level.config.numRows) return;\r\n\r\n         var toCookie: Cookie = this.level.cookieAtPosition(toColumn, toRow);\r\n         if (!toCookie) return;\r\n\r\n         var fromCookie = this.level.cookieAtPosition(this.swipeFromColumn, this.swipeFromRow);\r\n\r\n         var swap = new Swap();\r\n         swap.cookieA = fromCookie;\r\n         swap.cookieB = toCookie;\r\n\r\n         if (this.level.isPossibleSwap(swap)) {\r\n            this.userInteractionEnabled = true;\r\n            this.level.performSwap(swap);\r\n            this.animateSwap(swap);\r\n            this.isPossibleSwap = true;\r\n            console.log('Good swap');\r\n         }\r\n         else {\r\n            this.userInteractionEnabled = true;\r\n            this.animateInvalidSwap(swap);\r\n            this.isPossibleSwap = false;\r\n            console.log('Bad swap');\r\n\r\n         }\r\n\r\n      }\r\n\r\n      handleMatches() {\r\n         var chains = this.level.removeMatches();\r\n         console.log('handleMatches-removeMatches'); //sterben\r\n         \r\n         if(chains.length == 0){\r\n            this.beginNextTurn();\r\n            return;\r\n         }\r\n         \r\n         this.animateMatchedCookies(chains);\r\n         this.updateScore(chains);\r\n         \r\n         var columns = this.level.fillHoles();\r\n         this.animateFallingCookies(columns);\r\n         \r\n         var newColumns = this.level.topUpCookies();\r\n         \r\n         this.animateNewCookies(newColumns, () => {\r\n            this.handleMatches();\r\n         });\r\n\r\n      }\r\n      \r\n      private updateScore(chains: Chain[]){\r\n         chains.forEach((chain) => {\r\n            this.score += chain.score;   \r\n         });\r\n         \r\n         this.updateScoreText();\r\n      }\r\n      \r\n      private beginNextTurn(){\r\n         this.userInteractionEnabled = true;\r\n      }\r\n\r\n      animateSwap(swap: Swap) {\r\n\r\n         var cookieSrpiteA = swap.cookieA.sprite,\r\n            cookieSrpiteB = swap.cookieB.sprite;\r\n\r\n         var tween = this.game.add.tween(swap.cookieA.sprite).to({ x: cookieSrpiteB.position.x, y: cookieSrpiteB.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n         var tween2 = this.game.add.tween(swap.cookieB.sprite).to({ x: cookieSrpiteA.position.x, y: cookieSrpiteA.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n\r\n         tween.onComplete.add(() => {\r\n            console.log('tween complete');\r\n\r\n            this.swapSound.play();\r\n\r\n            this.userInteractionEnabled = true;\r\n         }, this);\r\n\r\n      }\r\n\r\n      animateInvalidSwap(swap: Swap) {\r\n         var cookieSrpiteA = swap.cookieA.sprite,\r\n            cookieSrpiteB = swap.cookieB.sprite;\r\n\r\n         var tween = this.game.add.tween(swap.cookieA.sprite).to({ x: cookieSrpiteB.position.x, y: cookieSrpiteB.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n         var tween2 = this.game.add.tween(swap.cookieB.sprite).to({ x: cookieSrpiteA.position.x, y: cookieSrpiteA.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n\r\n         tween2.onComplete.add(() => {\r\n            var tweenBack = this.game.add.tween(swap.cookieB.sprite).to({ x: cookieSrpiteA.position.x, y: cookieSrpiteA.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n            var tweenBack2 = this.game.add.tween(swap.cookieA.sprite).to({ x: cookieSrpiteB.position.x, y: cookieSrpiteB.position.y }, 100, Phaser.Easing.Linear.None, true);\r\n\r\n            this.invalidSwapSound.play();\r\n\r\n         }, this);\r\n      }\r\n\r\n      animateMatchedCookies(chains: Chain[]) {\r\n\r\n         chains.forEach((chain) => {\r\n            this.animateScoreForChain(chain);\r\n            flagCroissant = 0;\r\n            flagCupcake = 0;\r\n            flagDanish = 0;\r\n            flagDonut = 0;\r\n            flagMacaroon = 0;\r\n            flagSugarCookie = 0;\r\n            chain.cookies.forEach((cookie) => {\r\n               // 1        \r\n               if (cookie.sprite != null) {\r\n \r\n                  // 2\r\n                  cookie.sprite.kill();\r\n                  this.matchSound.play();\r\n                  console.log('spriteName: '+cookie.cookieType+' '+cookie.spriteName()); //sterben\r\n                  //Conteo de cookies explotadas\r\n                  /*croissant = 1,\r\n                  cupcake = 2,\r\n                  danish = 3,\r\n                  donut = 4,\r\n                  macaroon = 5,\r\n                  sugarCookie = 6*/\r\n                  if(cookie.cookieType == 1){\r\n                     if(flagCroissant == 0){\r\n                        countCroissant = countCroissant+1;\r\n                        console.log('countCroissant: '+countCroissant); //sterben2\r\n                        flagCroissant = 1;\r\n                     }\r\n                  }\r\n\r\n                  if(cookie.cookieType == 2){\r\n                     if(flagCupcake == 0){\r\n                        countCupcake = countCupcake+1;\r\n                        console.log('countCupcake: '+countCupcake); //sterben2\r\n                        flagCupcake = 1;\r\n                        if(countCupcake == 2){\r\n                              countCroissant = 0;\r\n                              countCupcake = 0;\r\n                              countDanish = 0;\r\n                              countDonut = 0;\r\n                              countMacaroon = 0;\r\n                              countSugarCookie = 0;\r\n                              this.gameTimer.endTimer();\r\n                              return;\r\n                        }\r\n                     }\r\n                  }\r\n\r\n                  if(cookie.cookieType == 3){\r\n                     if(flagDanish == 0){\r\n                        countDanish = countDanish+1;\r\n                        console.log('countDanish: '+countDanish); //sterben2\r\n                        flagDanish = 1;\r\n                     }\r\n                  }\r\n\r\n                  if(cookie.cookieType == 4){\r\n                     if(flagDonut == 0){\r\n                        countDonut = countDonut+1;\r\n                        console.log('countDonut: '+countDonut); //sterben2\r\n                        flagDonut = 1;\r\n                     }\r\n                  }\r\n\r\n                  if(cookie.cookieType == 5){\r\n                     if(flagMacaroon == 0){\r\n                        countMacaroon = countMacaroon+1;\r\n                        console.log('countMacaroon: '+countMacaroon); //sterben2\r\n                        flagMacaroon = 1;\r\n                     }\r\n                  }\r\n\r\n                  if(cookie.cookieType == 6){\r\n                     if(flagSugarCookie == 0){\r\n                        countSugarCookie = countSugarCookie+1;\r\n                        console.log('countSugarCookie: '+countSugarCookie); //sterben2\r\n                        flagSugarCookie = 1;\r\n                     }\r\n                  }\r\n \r\n                  // 3\r\n                  cookie.sprite = null;\r\n               }\r\n            });\r\n         });\r\n\r\n      }\r\n      \r\n      \r\n      animateFallingCookies(columns: any[]){\r\n         \r\n         var longestDuration = 0;\r\n         \r\n         columns.forEach((cookies: Cookie[]) => {\r\n            var count = 0;\r\n            cookies.forEach((cookie: Cookie) => {\r\n               count++;\r\n               \r\n               var newPosition = this.pointForCookie(cookie.column, cookie.row);\r\n               \r\n               var delay = 0.05 + 0.15 * count*500;\r\n               \r\n               var duration = ((cookie.sprite.position.y - newPosition.y) / this.tileHeight) * 100;\r\n               \r\n               longestDuration = Math.max(longestDuration, duration + delay);\r\n               \r\n               var tween = this.game.add.tween(cookie.sprite).to({ x: newPosition.x, y: newPosition.y }, duration, Phaser.Easing.Linear.None, true, delay);\r\n               \r\n               tween.onComplete.add(() => {\r\n                  console.log('animateFallingCookies complete', duration);\r\n                  this.fallingCookieSound.play();\r\n               });\r\n               \r\n            });\r\n         });\r\n         \r\n      }\r\n      \r\n      \r\n      animateNewCookies(columns: any[], onComplete){\r\n         \r\n         var longestDuration = 0;\r\n         var tweens: Phaser.Tween[] = [];\r\n         \r\n         columns.forEach((cookies: Cookie[]) => {\r\n            var idx = 0;\r\n            \r\n            var startRow = cookies[0].row + 1;\r\n            var cookiesCount = cookies.length;\r\n            \r\n            cookies.forEach((cookie: Cookie) => {\r\n               idx++;\r\n\r\n               console.log('spriteNameNews:'+cookie.spriteName()); //sterben\r\n               \r\n               var point = this.pointForCookie(cookie.column, startRow);\r\n               var createdCookie: Phaser.Sprite = this.cookieLayer.create(point.x, point.y, cookie.spriteName());\r\n               createdCookie.inputEnabled = true;\r\n               createdCookie.events.onInputDown.add(this.touchesBegan, this);\r\n               createdCookie.events.onInputUp.add(this.touchesEnd, this);\r\n               cookie.sprite = createdCookie;\r\n               \r\n               var delay = 0.1 + 0.2 * (cookiesCount - idx - 1) * 150;\r\n               \r\n               var duration = (startRow - cookie.row) * 100;\r\n               longestDuration = Math.max(longestDuration, duration + delay);\r\n               \r\n               var newPoint = this.pointForCookie(cookie.column, cookie.row);\r\n               createdCookie.alpha = 0;\r\n               \r\n               var tween = this.game.add.tween(createdCookie).to({ x: newPoint.x, y: newPoint.y, alpha: 1 }, duration, Phaser.Easing.Linear.None, true, delay);\r\n               \r\n            });\r\n            \r\n         });\r\n         \r\n         this.game.time.events.add(longestDuration+100, onComplete, this);\r\n      }  \r\n      \r\n      animateScoreForChain(chain: Chain){\r\n         var firstCookie = chain.cookies[0];\r\n         var lastCookie = chain.cookies[chain.cookies.length - 1];\r\n         \r\n         var x = (firstCookie.sprite.position.x + lastCookie.sprite.position.x + 30)/2;\r\n         var y = (firstCookie.sprite.position.y + lastCookie.sprite.position.y)/2 - 8;\r\n         \r\n         var scoreLabel = this.game.add.text(x, y, \"\"+chain.score, {\r\n            font: \"Gill Sans Bold\",\r\n            fill: \"white\",\r\n            align: \"center\",\r\n            fontSize: 30\r\n         });\r\n         scoreLabel.z = 300;\r\n         \r\n         this.game.add.tween(scoreLabel).to({ alpha: 0 }, 700, Phaser.Easing.Linear.None, true);\r\n      }\r\n\r\n   }\r\n}","module GameApp.States{\r\n\t'use strict';\r\n\t\r\n\texport class GameTimer{\r\n\t\t\r\n\t\tgame: Phaser.Game;\r\n      \r\n      timer: Phaser.Timer;\r\n      timerEvent: Phaser.TimerEvent;\r\n      timerText: Phaser.Text;\r\n\r\n      GameScene: GameScene;\r\n\t\t\r\n\t\tconstructor(game: Phaser.Game) {\r\n\t\t\tthis.game = game;\r\n\t\t}\r\n\t\t\r\n\t\trenderTimer() {\r\n         if(this.timer.running){\r\n            this.timerText.text = this.formatTime(Math.round((this.timerEvent.delay + this.timer.ms) / 1000));\r\n         }\r\n         else{\r\n             if(this.timerText.text != \"Game over\"){ //sterben\r\n                  this.timerText.text = \"Hecho\";\r\n             }\r\n               \r\n         }\r\n      }\r\n      \r\n      createTimer() {\r\n         \r\n         //var timerlabel = this.game.add.text(32, 20, \"time:\", { //sterben\r\n         var timerlabel = this.game.add.text(32, 20, \"Tiempo:\", {\r\n            font: \"Gill Sans Bold\",\r\n            fill: \"white\",\r\n            align: \"center\",\r\n            fontSize: 20\r\n         });\r\n         timerlabel.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n\r\n         this.timerText = this.game.add.text(32, 40, \"02:00\", {\r\n             font: \"Gill Sans Bold\",\r\n             fill: \"white\",\r\n             align: \"center\",\r\n             fontSize: 30\r\n         });\r\n         this.timerText.setShadow(-1, 1, 'rgba(0,0,0,0.5)', 0);\r\n         \r\n         this.timer = this.game.time.create();\r\n         this.timerEvent = this.timer.add(Phaser.Timer.MINUTE*0 + Phaser.Timer.SECOND*10,  this.endTimer, this);\r\n         //this.timerEvent = this.timer.add(10000, this.endTimer, this);\r\n         //this.timerEvent = this.timer.repeat(Phaser.Timer.MINUTE * 0 + Phaser.Timer.SECOND * 1, Phaser.Timer.MINUTE * 0 +  Phaser.Timer.SECOND*10, this.endTimer, this);\r\n         this.timer.start();\r\n      }\r\n      \r\n      endTimer(){\r\n         this.timer.stop();\r\n         \r\n         var levelNumber = parseInt(this.game.state.states['GameScene'].levelNumber);\r\n         console.log('levelNumber: '+levelNumber);\r\n         if(levelNumber <= 4){\r\n             levelNumber = levelNumber+1;\r\n             \r\n             \r\n              var bg = this.game.add.sprite(this.game.world.centerX, -200, 'levelComplete');\r\n              bg.anchor.setTo(0.5, 0.5);\r\n\r\n              \r\n              var tween = this.game.add.tween(bg).to({ x: this.game.world.centerX, y: this.game.world.centerY }, 3000, Phaser.Easing.Bounce.Out, true);\r\n              \r\n              tween.onComplete.add(() => {\r\n                 this.changeLevel(levelNumber);\r\n              }, this)\r\n             \r\n             \r\n         }\r\n         else{\r\n            this.timerText.text = \"Game over\";\r\n         }\r\n        \r\n      }\r\n      \r\n      changeLevel(levelNumber: number){\r\n         this.game.state.states['GameScene'].levelNumber = levelNumber;\r\n         this.game.state.states['GameScene'].score = this.game.state.states['GameScene'].score;\r\n         this.game.state.start('GameScene', true, false);\r\n      }\r\n      \r\n      formatTime(s: number){\r\n         var minutes: any = \"0\" + Math.floor(s / 60);\r\n         var seconds = \"0\" + (s - minutes * 60);\r\n         return minutes.substr(-2) + \":\" + seconds.substr(-2); \r\n      }\r\n\t\t\r\n\t}\r\n\t\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n\t'use strict'; \r\n\t\r\n   export class GameEnd extends Phaser.State {\r\n \r\n        create() {\r\n \r\n        }\r\n \r\n    }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n   'use strict';\r\n\r\n   export class Menu extends Phaser.State {\r\n\r\n      preload() {\r\n\r\n      }\r\n\r\n      create() {\r\n         \r\n         var Croissant = this.game.add.sprite(32,100, 'Croissant');\r\n         var Macaroon = this.game.add.sprite(32,200, 'Macaroon');\r\n         var Cupcake = this.game.add.sprite(32,300,'Cupcake');\r\n         \r\n         var tweens: Phaser.Tween[] = [];\r\n         \r\n         var tween1 = this.game.add.tween(Croissant).to({x:200}, 1000, Phaser.Easing.Bounce.Out, false, 1000);\r\n         var tween2 = this.game.add.tween(Macaroon).to({x:200}, 1000, Phaser.Easing.Bounce.Out, true, 200);\r\n         var tween3 = this.game.add.tween(Cupcake).to({x:200}, 1000, Phaser.Easing.Bounce.Out, true, 100);\r\n         \r\n         \r\n         tweens.push(tween1, tween2, tween3);\r\n         \r\n         var firstTween = tweens.shift();\r\n         \r\n         firstTween.chain.apply(this, tweens);\r\n         \r\n         firstTween.chain(tween2);\r\n         \r\n         firstTween.start();\r\n         \r\n         firstTween.onComplete.add(function() { console.log('complete'); }, this);\r\n         firstTween.onChildComplete.add(function() { console.log('child complete'); }, this);\r\n         \r\n      }\r\n      \r\n      private tweenCroissantComplete(){\r\n         \r\n      }\r\n      \r\n\r\n   }\r\n}","module GameApp{\r\n\t'use strict';\r\n\t\r\n\texport class GameHelpers{\r\n\t\t\r\n\t\tstatic getRandomNumber(maxNumber: number): number{\r\n\t\t\treturn Math.floor((Math.random() * maxNumber) + 1);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}","/// <reference path='../../../../typings/angularjs/angular.d.ts' />\r\n/// <reference path='../../libs/phaser/typescript/phaser.d.ts' />\r\n\r\n/// <reference path='module.ts' />\r\n/// <reference path='index-controller.ts' />\r\n\r\n/// <reference path='models/chain.ts' />\r\n/// <reference path='models/tile.ts' />\r\n/// <reference path='models/cookie.ts' />\r\n/// <reference path='models/level.ts' />\r\n/// <reference path='models/swap.ts' />\r\n/// <reference path='models/config.ts' />\r\n\r\n/// <reference path='states/boot.ts' />\r\n/// <reference path='states/preloader.ts' />\r\n/// <reference path='states/game-scene.ts' />\r\n/// <reference path='states/game-scene.timer.ts' />\r\n/// <reference path='states/game-end.ts' />\r\n/// <reference path='states/menu.ts' />\r\n\r\n/// <reference path='candy-game.ts' />\r\n\r\n\r\n/// <reference path='game-helpers.ts' />\r\n","/// <reference path='_references.ts' />\r\n\r\nimport Boot = GameApp.States.Boot;\r\nimport Preloader = GameApp.States.Preloader;\r\nimport GameScene = GameApp.States.GameScene;\r\nimport GameEnd = GameApp.States.GameEnd;\r\nimport Menu = GameApp.States.Menu;\r\n\r\nclass CandyGame {\r\n   constructor(scope, injector) {\r\n      this.game = new Phaser.Game(640, 1136, Phaser.AUTO, 'gameCanvas', {\r\n         create: this.create\r\n      });\r\n\r\n   }\r\n\r\n   game: Phaser.Game;\r\n\r\n   create() {\r\n      this.game.state.add(\"Boot\", Boot);\r\n      this.game.state.add(\"Preloader\", Preloader);\r\n      this.game.state.add(\"Menu\", Menu);\r\n      this.game.state.add(\"GameScene\", GameScene);\r\n      this.game.state.add(\"GameEnd\", GameEnd);\r\n      \r\n      this.game.state.start(\"Boot\");\r\n   }\r\n\r\n}\r\n","/// <reference path='_references.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\r\n\t export function GameDirective($injector): angular.IDirective {\r\n\t\t\r\n\t\tvar linkFn = function(scope, ele, attrs) {\r\n\t\t\t//we pass $injector and scope for phaser game so it is possible to communicate with angular app\r\n\t\t\tnew CandyGame(scope, $injector);\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tscope: {},\r\n\t\t\ttemplate: '<div id=\"gameCanvas\"></div>',\r\n\t\t\tlink: linkFn\r\n\t\t}\r\n\t}\r\n\r\n\tGameDirective.$inject = ['$injector']\r\n\r\n\tangular.module('GameApp').directive('gameDirective',GameDirective)\r\n} "]}